<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map-canvas { height: 100% }
    </style>
    <script type="text/javascript">
    </script>
</head>
<body>
    <div id="map-canvas"/>
    </body>
    <script src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
    <script src="./js/lodash.js"></script>
    <script src="./js/gmap-extend.js"></script>
    <script src="./js/map.js"></script>
    <script>
        map.config({
            id: 'map-canvas',
            map: {center: [43.83130289858731, -72.0268984375]}
        });
        google.maps.event.addDomListener(window, 'load', function () {
            map.init();
            var id1 = map.addMarker({position: [43.48156941314745, -71.8950625]}),
                id2 = map.addMarker({position: [43.89863026081283, -71.6918154296875]}),
                id3 = map.addMarker({position: [44.22231761201409, -72.1752138671875]}),
                id4 = map.addPolyline({path: map.kmlToJson('44.3039524580006,-72.9108715765498 44.3046016351081,-72.9083294749274 44.3058808623079,-72.905783489856 44.3071138851829,-72.90463005149931 44.30873922889841,-72.9042742981604 44.3102314990898,-72.9042845416639 44.3125125718571,-72.90466714438232 44.3152779734415,-72.9046249374315 44.3171234070975,-72.9040872134306 44.318970564282,-72.9030600524368 44.3193676822508,-72.9024511268628 44.3195021662693,-72.9016568572593 44.32021790601,-72.8978082821551 44.32070624301471,-72.8962211695994 44.3212815628174,-72.894879382111 44.3220789583467,-72.8927438292608 44.3224336560478,-72.891706297833 44.3225712001157,-72.8899945182312 44.3226190882615,-72.8888325964407 44.3226677018709,-72.8874260092411 44.3228491068569,-72.885714398341 44.3227196940619,-72.8850407560745 44.3224631108791,-72.8830204960098')})
            setTimeout(map.deleteMarker, 1000, id1);
            setTimeout(map.deletePolyline, 1000, id4);
        });

        document.addEventListener('keyup', function (e) {
            console.log(map.getCenter());
        });
    </script>
</html>
